{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://www.powsybl.org/open-rao-crac-v2.5.schema.json",
  "title": "CRAC",
  "description": "CRAC data for electric grid operation",
  "type": "object",
  "properties": {
    "type": {
      "const": "CRAC"
    },
    "version": {
      "const": "2.5"
    },
    "info": {
      "const": "Generated by FARAO http://farao-community.github.io"
    },
    "id": {
      "type": "string"
    },
    "name": {
      "type": "string"
    },
    "instants": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "kind": {
            "enum": [
              "PREVENTIVE",
              "OUTAGE",
              "AUTO",
              "CURATIVE"
            ]
          }
        },
        "required": [
          "id",
          "kind"
        ]
      }
    },
    "networkElementsNamePerId": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "contingencies": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "networkElementsIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "id",
          "networkElementsIds"
        ]
      }
    },
    "flowCnecs": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "networkElementId": {
            "type": "string"
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "border": {
            "type": [
              "string",
              "null"
            ]
          },
          "instant": {
            "type": "string"
          },
          "contingencyId": {
            "type": [
              "string",
              "null"
            ]
          },
          "optimized": {
            "type": "boolean"
          },
          "monitored": {
            "type": "boolean"
          },
          "reliabilityMargin": {
            "type": "number"
          },
          "iMax": {
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "nominalV": {
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "thresholds": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "unit": {
                  "enum": [
                    "ampere",
                    "megawatt",
                    "percent_imax"
                  ]
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                },
                "side": {
                  "enum": [
                    1,
                    2
                  ]
                }
              },
              "required": [
                "unit",
                "side"
              ]
            }
          }
        },
        "required": [
          "id",
          "networkElementId",
          "instant",
          "thresholds"
        ]
      }
    },
    "angleCnecs": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "exportingNetworkElementId": {
            "type": "string"
          },
          "importingNetworkElementId": {
            "type": "string"
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "border": {
            "type": [
              "string",
              "null"
            ]
          },
          "instant": {
            "type": "string"
          },
          "contingencyId": {
            "type": [
              "string",
              "null"
            ]
          },
          "optimized": {
            "type": "boolean"
          },
          "monitored": {
            "type": "boolean"
          },
          "reliabilityMargin": {
            "type": "number"
          },
          "thresholds": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "unit": {
                  "const": "degree"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "required": [
                "unit"
              ]
            }
          }
        },
        "required": [
          "id",
          "exportingNetworkElementId",
          "importingNetworkElementId",
          "instant",
          "thresholds"
        ]
      }
    },
    "voltageCnecs": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "networkElementId": {
            "type": "string"
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "border": {
            "type": [
              "string",
              "null"
            ]
          },
          "instant": {
            "type": "string"
          },
          "contingencyId": {
            "type": [
              "string",
              "null"
            ]
          },
          "optimized": {
            "type": "boolean"
          },
          "monitored": {
            "type": "boolean"
          },
          "reliabilityMargin": {
            "type": "number"
          },
          "thresholds": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "unit": {
                  "const": "kilovolt"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "required": [
                "unit"
              ]
            }
          }
        },
        "required": [
          "id",
          "networkElementId",
          "instant",
          "thresholds"
        ]
      }
    },
    "pstRangeActions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "groupId": {
            "type": [
              "string",
              "null"
            ]
          },
          "speed": {
            "type": "number"
          },
          "networkElementId": {
            "type": "string"
          },
          "initialTap": {
            "type": "number"
          },
          "tapToAngleConversionMap": {
            "type": "object",
            "additionalProperties": {
              "type": "number"
            }
          },
          "ranges": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "rangeType": {
                  "enum": [
                    "absolute",
                    "relativeToPreviousInstant",
                    "relativeToInitialNetwork",
                    "relativeToPreviousTimeStep"
                  ]
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "required": [
                "rangeType"
              ]
            }
          },
          "onInstantUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "usageMethod"
              ]
            }
          },
          "onContingencyStateUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "contingencyId",
                "usageMethod"
              ]
            }
          },
          "onConstraintUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "cnecId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "cnecId",
                "usageMethod"
              ]
            }
          },
          "onFlowConstraintInCountry": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "country": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$"
                }
              },
              "required": [
                "instant",
                "country"
              ]
            }
          }
        },
        "required": [
          "id",
          "networkElementId",
          "initialTap",
          "tapToAngleConversionMap",
          "ranges"
        ]
      }
    },
    "hvdcRangeActions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "groupId": {
            "type": [
              "string",
              "null"
            ]
          },
          "speed": {
            "type": "number"
          },
          "networkElementId": {
            "type": "string"
          },
          "initialSetpoint": {
            "type": "number"
          },
          "ranges": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              }
            }
          },
          "onInstantUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "usageMethod"
              ]
            }
          },
          "onContingencyStateUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "contingencyId",
                "usageMethod"
              ]
            }
          },
          "onConstraintUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "cnecId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "cnecId",
                "usageMethod"
              ]
            }
          },
          "onFlowConstraintInCountry": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "country": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$"
                }
              },
              "required": [
                "instant",
                "country"
              ]
            }
          }
        },
        "required": [
          "id",
          "networkElementId",
          "ranges"
        ]
      }
    },
    "injectionRangeActions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "groupId": {
            "type": [
              "string",
              "null"
            ]
          },
          "speed": {
            "type": "number"
          },
          "networkElementIdsAndKeys": {
            "type": "object",
            "additionalProperties": {
              "type": "number"
            }
          },
          "initialSetpoint": {
            "type": "number"
          },
          "ranges": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              }
            }
          },
          "onInstantUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "usageMethod"
              ]
            }
          },
          "onContingencyStateUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "contingencyId",
                "usageMethod"
              ]
            }
          },
          "onConstraintUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "cnecId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "cnecId",
                "usageMethod"
              ]
            }
          },
          "onFlowConstraintInCountry": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "country": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$"
                }
              },
              "required": [
                "instant",
                "country"
              ]
            }
          }
        },
        "required": [
          "id",
          "networkElementIdsAndKeys",
          "ranges"
        ]
      }
    },
    "counterTradeRangeActions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "groupId": {
            "type": [
              "string",
              "null"
            ]
          },
          "speed": {
            "type": "number"
          },
          "exportingCountry": {
            "type": "string",
            "pattern": "^[A-Z]{2}$"
          },
          "importingCountry": {
            "type": "string",
            "pattern": "^[A-Z]{2}$"
          },
          "initialSetpoint": {
            "type": "number"
          },
          "ranges": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              }
            }
          },
          "onInstantUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "usageMethod"
              ]
            }
          },
          "onContingencyStateUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "contingencyId",
                "usageMethod"
              ]
            }
          },
          "onConstraintUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "cnecId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "cnecId",
                "usageMethod"
              ]
            }
          },
          "onFlowConstraintInCountry": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "country": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$"
                }
              },
              "required": [
                "instant",
                "country"
              ]
            }
          }
        },
        "required": [
          "id",
          "exportingCountry",
          "importingCountry",
          "ranges"
        ]
      }
    },
    "networkActions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "operator": {
            "type": [
              "string",
              "null"
            ]
          },
          "speed": {
            "type": "number"
          },
          "terminalsConnectionActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "actionType": {
                  "enum": [
                    "close",
                    "open"
                  ]
                }
              }
            }
          },
          "phaseTapChangerTapPositionActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "tapPosition": {
                  "type": "number"
                }
              }
            }
          },
          "generatorActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "activePowerValue": {
                  "type": "number"
                }
              }
            }
          },
          "loadActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "activePowerValue": {
                  "type": "number"
                }
              }
            }
          },
          "danglingLineActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "activePowerValue": {
                  "type": "number"
                }
              }
            }
          },
          "shuntCompensatorPositionActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "sectionCount": {
                  "type": "number"
                }
              }
            }
          },
          "switchActions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "networkElementId": {
                  "type": "string"
                },
                "actionType": {
                  "enum": [
                    "close",
                    "open"
                  ]
                }
              }
            }
          },
          "onInstantUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "usageMethod"
              ]
            }
          },
          "onContingencyStateUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "contingencyId",
                "usageMethod"
              ]
            }
          },
          "onConstraintUsageRules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "cnecId": {
                  "type": "string"
                },
                "usageMethod": {
                  "enum": [
                    "available",
                    "forced",
                    "unavailable"
                  ]
                }
              },
              "required": [
                "instant",
                "cnecId",
                "usageMethod"
              ]
            }
          },
          "onFlowConstraintInCountry": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "instant": {
                  "type": "string"
                },
                "contingencyId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "country": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$"
                }
              },
              "required": [
                "instant",
                "country"
              ]
            }
          }
        },
        "required": [
          "id"
        ]
      }
    }
  },
  "required": [
    "type",
    "version",
    "info",
    "id",
    "name",
    "instants",
    "contingencies",
    "flowCnecs",
    "angleCnecs",
    "voltageCnecs",
    "pstRangeActions",
    "hvdcRangeActions",
    "injectionRangeActions",
    "networkActions"
  ]
}
